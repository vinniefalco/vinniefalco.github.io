<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Control frames</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../index.html" title="Beast">
<link rel="up" href="../websocket.html" title="WebSocket">
<link rel="prev" href="frames.html" title="Frames">
<link rel="next" href="pongs.html" title="Pong messages">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="Beast Logo" width="1330" height="80" src="../../images/beast.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="frames.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../websocket.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="pongs.html"><img src="../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="beast.websocket.controlframes"></a><a class="link" href="controlframes.html" title="Control frames">Control frames</a>
</h3></div></div></div>
<p>
        During read operations, the implementation automatically reads and processes
        WebSocket control frames such as ping, pong, and close. Pings are replied
        to as soon as possible, pongs are delivered to the pong callback. The receipt
        of a close frame initiates the WebSocket close procedure, eventually resulting
        in the error code <a class="link" href="../../"><code class="computeroutput"><span class="identifier">error</span><span class="special">::</span><span class="identifier">closed</span></code></a> being delivered to the caller
        in a subsequent read operation, assuming no other error takes place.
      </p>
<p>
        To ensure timely delivery of control frames, large messages are broken up
        into smaller sized frames. The implementation chooses the size and number
        of the frames making up the message. The automatic fragment size option gives
        callers control over the size of these frames:
      </p>
<pre class="programlisting"><span class="special">...</span>
<span class="identifier">ws</span><span class="special">.</span><span class="identifier">set_option</span><span class="special">(</span><span class="identifier">beast</span><span class="special">::</span><span class="identifier">websocket</span><span class="special">::</span><span class="identifier">auto_fragment_size</span><span class="special">{</span><span class="number">8192</span><span class="special">});</span>
</pre>
<p>
        The WebSocket protocol defines a procedure and control message for initiating
        a close of the session. Handling of close initiated by the remote end of
        the connection is performed automatically. To manually initiate a close,
        use <a class="link" href="../ref/beast__websocket__stream/close.html" title="websocket::stream::close"><code class="computeroutput"><span class="identifier">close</span></code></a>:
      </p>
<pre class="programlisting"><span class="identifier">ws</span><span class="special">.</span><span class="identifier">close</span><span class="special">();</span>
</pre>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
          To receive the <a class="link" href="../../"><code class="computeroutput"><span class="identifier">error</span><span class="special">::</span><span class="identifier">closed</span></code></a> error, a read operation
          is required.
        </p></td></tr>
</table></div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2013-2016 Vinnie
      Falco<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="frames.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../websocket.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="pongs.html"><img src="../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
