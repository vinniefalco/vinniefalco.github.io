<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>http::async_write</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../index.html" title="Beast">
<link rel="up" href="../ref.html" title="Reference">
<link rel="prev" href="beast__http__async_read.html" title="http::async_read">
<link rel="next" href="beast__http__basic_dynabuf_body.html" title="http::basic_dynabuf_body">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="Beast Logo" width="1330" height="80" src="../../images/beast.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="beast__http__async_read.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../ref.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="beast__http__basic_dynabuf_body.html"><img src="../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="beast.ref.beast__http__async_write"></a><a class="link" href="beast__http__async_write.html" title="http::async_write">http::async_write</a>
</h3></div></div></div>
<p>
        <a class="indexterm" name="id1010312"></a>
Start an asynchronous operation to write a HTTP/1 message
        to a stream.
      </p>
<h5>
<a name="beast.ref.beast__http__async_write.h0"></a>
        <span class="phrase"><a name="beast.ref.beast__http__async_write.synopsis"></a></span><a class="link" href="beast__http__async_write.html#beast.ref.beast__http__async_write.synopsis">Synopsis</a>
      </h5>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span>
    <span class="keyword">class</span> <a href="http://www.boost.org/doc/libs/1_60_0/doc/html/boost_asio/reference/AsyncWriteStream.html" target="_top"><span class="bold"><strong>AsyncWriteStream</strong></span></a><span class="special">,</span>
    <span class="keyword">bool</span> <span class="identifier">isRequest</span><span class="special">,</span>
    <span class="keyword">class</span> <a class="link" href="../../"><span class="bold"><strong>Body</strong></span></a><span class="special">,</span>
    <span class="keyword">class</span> <span class="identifier">Headers</span><span class="special">,</span>
    <span class="keyword">class</span> <span class="identifier">WriteHandler</span><span class="special">&gt;</span>
<a href="http://www.boost.org/doc/libs/1_60_0/doc/html/boost_asio/reference/asynchronous_operations.html#boost_asio.reference.asynchronous_operations.return_type_of_an_initiating_function" target="_top"><span class="emphasis"><em>void-or-deduced</em></span></a>
<span class="identifier">async_write</span><span class="special">(</span>
    <span class="identifier">AsyncWriteStream</span><span class="special">&amp;</span> <span class="identifier">stream</span><span class="special">,</span>
    <span class="identifier">message_v1</span><span class="special">&lt;</span> <span class="identifier">isRequest</span><span class="special">,</span> <span class="identifier">Body</span><span class="special">,</span> <span class="identifier">Headers</span> <span class="special">&gt;</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">msg</span><span class="special">,</span>
    <span class="identifier">WriteHandler</span><span class="special">&amp;&amp;</span> <span class="identifier">handler</span><span class="special">);</span>
</pre>
<h5>
<a name="beast.ref.beast__http__async_write.h1"></a>
        <span class="phrase"><a name="beast.ref.beast__http__async_write.description"></a></span><a class="link" href="beast__http__async_write.html#beast.ref.beast__http__async_write.description">Description</a>
      </h5>
<p>
        This function is used to asynchronously write a message to a stream. The
        function call always returns immediately. The asynchronous operation will
        continue until one of the following conditions is true:
      </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
            The entire message is sent.
          </li>
<li class="listitem">
            An error occurs.
          </li>
</ul></div>
<p>
        This operation is implemented in terms of one or more calls to the stream's
        <code class="computeroutput"><span class="identifier">async_write_some</span></code> functions,
        and is known as a <span class="emphasis"><em>composed operation</em></span>. The program must
        ensure that the stream performs no other write operations (such as <a class="link" href="beast__http__async_write.html" title="http::async_write"><code class="computeroutput"><span class="identifier">http</span><span class="special">::</span><span class="identifier">async_write</span></code></a>,
        the stream's <code class="computeroutput"><span class="identifier">async_write_some</span></code>
        function, or any other composed operations that perform writes) until this
        operation completes.
      </p>
<p>
        The implementation will automatically perform chunk encoding if the contents
        of the message indicate that chunk encoding is required. If the semantics
        of the message indicate that the connection should be closed after the message
        is sent, the operation will complete with the error set to <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">asio</span><span class="special">::</span><span class="identifier">error</span><span class="special">::</span><span class="identifier">eof</span></code>.
      </p>
<h5>
<a name="beast.ref.beast__http__async_write.h2"></a>
        <span class="phrase"><a name="beast.ref.beast__http__async_write.parameters"></a></span><a class="link" href="beast__http__async_write.html#beast.ref.beast__http__async_write.parameters">Parameters</a>
      </h5>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                <p>
                  Name
                </p>
              </th>
<th>
                <p>
                  Description
                </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">stream</span></code>
                </p>
              </td>
<td>
                <p>
                  The stream to which the data is to be written. The type must support
                  the <code class="computeroutput"><span class="identifier">AsyncWriteStream</span></code>
                  concept.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">msg</span></code>
                </p>
              </td>
<td>
                <p>
                  The message to send.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">handler</span></code>
                </p>
              </td>
<td>
                <p>
                  The handler to be called when the request completes. Copies will
                  be made of the handler as required. The equivalent function signature
                  of the handler must be:
                </p>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"> <span class="keyword">void</span> <span class="identifier">handler</span><span class="special">(</span>
    <span class="identifier">error_code</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">error</span> <span class="comment">// result of operation</span>
<span class="special">);</span>
</pre>
                <p>
                  Regardless of whether the asynchronous operation completes immediately
                  or not, the handler will not be invoked from within this function.
                  Invocation of the handler will be performed in a manner equivalent
                  to using <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">asio</span><span class="special">::</span><span class="identifier">io_service</span><span class="special">::</span><span class="identifier">post</span></code>.
                </p>
              </td>
</tr>
</tbody>
</table></div>
<h5>
<a name="beast.ref.beast__http__async_write.h3"></a>
        <span class="phrase"><a name="beast.ref.beast__http__async_write.remarks"></a></span><a class="link" href="beast__http__async_write.html#beast.ref.beast__http__async_write.remarks">Remarks</a>
      </h5>
<p>
        The message object must remain valid at least until the completion handler
        is called, no copies are made.
      </p>
<h5>
<a name="beast.ref.beast__http__async_write.h4"></a>
        <span class="phrase"><a name="beast.ref.beast__http__async_write.header"></a></span><a class="link" href="beast__http__async_write.html#beast.ref.beast__http__async_write.header">Header</a>
      </h5>
<p>
        <code class="computeroutput"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">beast</span><span class="special">/</span><span class="identifier">http</span><span class="special">/</span><span class="identifier">write</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code>
      </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2013-2016 Vinnie
      Falco<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="beast__http__async_read.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../ref.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="beast__http__basic_dynabuf_body.html"><img src="../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
