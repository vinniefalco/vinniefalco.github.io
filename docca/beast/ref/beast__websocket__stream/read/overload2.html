<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>websocket::stream::read (2 of 2 overloads)</title>
<link rel="stylesheet" href="../../../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../../../index.html" title="Beast">
<link rel="up" href="../read.html" title="websocket::stream::read">
<link rel="prev" href="overload1.html" title="websocket::stream::read (1 of 2 overloads)">
<link rel="next" href="../read_frame.html" title="websocket::stream::read_frame">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="Beast Logo" width="1330" height="80" src="../../../../images/beast.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="overload1.html"><img src="../../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../read.html"><img src="../../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../../index.html"><img src="../../../../images/home.png" alt="Home"></a><a accesskey="n" href="../read_frame.html"><img src="../../../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h5 class="title">
<a name="beast.ref.beast__websocket__stream.read.overload2"></a><a class="link" href="overload2.html" title="websocket::stream::read (2 of 2 overloads)">websocket::stream::read
          (2 of 2 overloads)</a>
</h5></div></div></div>
<p>
            Read a message from the stream.
          </p>
<h6>
<a name="beast.ref.beast__websocket__stream.read.overload2.h0"></a>
            <span class="phrase"><a name="beast.ref.beast__websocket__stream.read.overload2.synopsis"></a></span><a class="link" href="overload2.html#beast.ref.beast__websocket__stream.read.overload2.synopsis">Synopsis</a>
          </h6>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span>
    <span class="keyword">class</span> <a class="link" href="../../../../"><span class="bold"><strong>DynamicBuffer</strong></span></a><span class="special">&gt;</span>
<span class="keyword">void</span>
<span class="identifier">read</span><span class="special">(</span>
    <span class="identifier">opcode</span><span class="special">&amp;</span> <span class="identifier">op</span><span class="special">,</span>
    <span class="identifier">DynamicBuffer</span><span class="special">&amp;</span> <span class="identifier">dynabuf</span><span class="special">,</span>
    <span class="identifier">error_code</span><span class="special">&amp;</span> <span class="identifier">ec</span><span class="special">);</span>
</pre>
<h6>
<a name="beast.ref.beast__websocket__stream.read.overload2.h1"></a>
            <span class="phrase"><a name="beast.ref.beast__websocket__stream.read.overload2.description"></a></span><a class="link" href="overload2.html#beast.ref.beast__websocket__stream.read.overload2.description">Description</a>
          </h6>
<p>
            This function is used to synchronously read a message from the stream.
            The call blocks until one of the following is true:
          </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
                A complete message is received.
              </li>
<li class="listitem">
                An error occurs on the stream.
              </li>
</ul></div>
<p>
            This call is implemented in terms of one or more calls to the stream's
            <code class="computeroutput"><span class="identifier">read_some</span></code> and <code class="computeroutput"><span class="identifier">write_some</span></code> operations.
          </p>
<p>
            Upon a success, op is set to either binary or text depending on the message
            type, and the input area of the stream buffer will hold all the message
            payload bytes (which may be zero in length).
          </p>
<p>
            Control frames encountered while reading frame or message data are handled
            automatically. Pings are replied to automatically, pongs are routed to
            the pong callback if the option is set, and close frames initiate the
            WebSocket close procedure. When a close frame is received, this call
            will eventually return <a class="link" href="../../beast__websocket__error.html" title="websocket::error"><code class="computeroutput"><span class="identifier">websocket</span><span class="special">::</span><span class="identifier">closed</span></code></a>. Because of the need
            to handle control frames, read operations can cause writes to take place.
          </p>
<h6>
<a name="beast.ref.beast__websocket__stream.read.overload2.h2"></a>
            <span class="phrase"><a name="beast.ref.beast__websocket__stream.read.overload2.parameters"></a></span><a class="link" href="overload2.html#beast.ref.beast__websocket__stream.read.overload2.parameters">Parameters</a>
          </h6>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                    <p>
                      Name
                    </p>
                  </th>
<th>
                    <p>
                      Description
                    </p>
                  </th>
</tr></thead>
<tbody>
<tr>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">op</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      A value to receive the message type. This object must remain
                      valid until the handler is called.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">dynabuf</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      A dynamic buffer to hold the message data after any masking
                      or decompression has been applied.
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">ec</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      Set to indicate what error occurred, if any.
                    </p>
                  </td>
</tr>
</tbody>
</table></div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2013-2016 Vinnie
      Falco<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="overload1.html"><img src="../../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../read.html"><img src="../../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../../index.html"><img src="../../../../images/home.png" alt="Home"></a><a accesskey="n" href="../read_frame.html"><img src="../../../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
