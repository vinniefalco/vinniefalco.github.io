<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>websocket::stream::async_handshake</title>
<link rel="stylesheet" href="../../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../../index.html" title="Beast">
<link rel="up" href="../websocket__stream.html" title="websocket::stream">
<link rel="prev" href="async_close.html" title="websocket::stream::async_close">
<link rel="next" href="async_ping.html" title="websocket::stream::async_ping">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="Beast Logo" width="1330" height="80" src="../../../images/beast.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="async_close.html"><img src="../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../websocket__stream.html"><img src="../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../images/home.png" alt="Home"></a><a accesskey="n" href="async_ping.html"><img src="../../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="beast.ref.websocket__stream.async_handshake"></a><a class="link" href="async_handshake.html" title="websocket::stream::async_handshake">websocket::stream::async_handshake</a>
</h4></div></div></div>
<p>
          <a class="indexterm" name="id1089386"></a>
Start an asynchronous operation to send
          an upgrade request and receive the response.
        </p>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span>
    <span class="keyword">class</span> <span class="identifier">HandshakeHandler</span><span class="special">&gt;</span>
<a href="http://www.boost.org/doc/libs/1_60_0/doc/html/boost_asio/reference/asynchronous_operations.html#boost_asio.reference.asynchronous_operations.return_type_of_an_initiating_function" target="_top"><span class="emphasis"><em>void-or-deduced</em></span></a>
<span class="identifier">async_handshake</span><span class="special">(</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">string_ref</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">host</span><span class="special">,</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">string_ref</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">resource</span><span class="special">,</span>
    <span class="identifier">HandshakeHandler</span><span class="special">&amp;&amp;</span> <span class="identifier">h</span><span class="special">);</span>
</pre>
<p>
          This function is used to asynchronously send the HTTP WebSocket upgrade
          request and receive the HTTP WebSocket Upgrade response. This function
          call always returns immediately. The asynchronous operation will continue
          until one of the following conditions is true:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
              A HTTP request finishes sending and a HTTP response finishes receiving.
            </li>
<li class="listitem">
              An error occurs on the stream.
            </li>
</ul></div>
<p>
          This operation is implemented in terms of one or more calls to the next
          layer's <code class="computeroutput"><span class="identifier">async_read_some</span></code>
          and <code class="computeroutput"><span class="identifier">async_write_some</span></code> functions,
          and is known as a <span class="emphasis"><em>composed operation</em></span>. The program
          must ensure that the stream performs no other operations until this operation
          completes.
        </p>
<p>
          The operation is successful if the received HTTP response indicates a successful
          HTTP Upgrade (represented by a Status-Code of 101, "switching protocols").
        </p>
<h6>
<a name="beast.ref.websocket__stream.async_handshake.h0"></a>
          <span class="phrase"><a name="beast.ref.websocket__stream.async_handshake.parameters"></a></span><a class="link" href="async_handshake.html#beast.ref.websocket__stream.async_handshake.parameters">Parameters</a>
        </h6>
<div class="variablelist">
<p class="title"><b></b></p>
<dl class="variablelist">
<dt><span class="term">host</span></dt>
<dd><p>
                The name of the remote host, required by the HTTP protocol. Copies
                may be made as needed.
              </p></dd>
<dt><span class="term">resource</span></dt>
<dd><p>
                The requesting URI, which may not be empty, required by the HTTP
                protocol. Copies may be made as needed.
              </p></dd>
<dt><span class="term">h</span></dt>
<dd>
<p>
                The handler to be called when the request completes. Copies will
                be made of the handler as required. The equivalent function signature
                of the handler must be:
              </p>
<pre class="programlisting"> <span class="keyword">void</span> <span class="identifier">handler</span><span class="special">(</span>
    <span class="identifier">error_code</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">error</span> <span class="comment">// result of operation</span>
<span class="special">);</span>
</pre>
<p>
                Regardless of whether the asynchronous operation completes immediately
                or not, the handler will not be invoked from within this function.
                Invocation of the handler will be performed in a manner equivalent
                to using <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">asio</span><span class="special">::</span><span class="identifier">io_service</span><span class="special">::</span><span class="identifier">post</span></code>.
              </p>
</dd>
</dl>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2013-2016 Vinnie
      Falco<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="async_close.html"><img src="../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../websocket__stream.html"><img src="../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../images/home.png" alt="Home"></a><a accesskey="n" href="async_ping.html"><img src="../../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
